!function e(a,t,r){function n(s,o){if(!t[s]){if(!a[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[s]={exports:{}};a[s][0].call(u.exports,function(e){var t=a[s][1][e];return n(t?t:e)},u,u.exports,e,a,t,r)}return t[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,a,t){"use strict";var r=e("./datatable.helper");t.EVENT_REFRESH_DATA_TABLE_PREFIX="datatable-refresh-",t.EVENT_PAGE_CHANGED_DATA_TABLE="datatable-page-changed";var n=function(){function e(e,a){return this.$injector=e,this.usSpinnerService=a,this.create()}return e.prototype.linkFn=function(e,a){var t=a.find(".grid-datatable table thead th[data-sort]");new r.DataTableSortingHelper(t,this.service,e.dataTable.pageChanged).initSorting()},e.prototype.controller=function(e){var a=this;this.$scope=e;var r=e.dataTable;r.isSearchAllowed=!!r.isSearchAllowed,r.searchValue="",this.service=this.$injector.get(r.serviceName+"PresentationService"),r.uniqueKey=r.uniqueKey||Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6),r.currentPage=1,r.itemsPerPage=this.service.getLimit(),r.pageChanged=function(e){a.markAsLoading(r),a.changePage(r,e||1)},r.pageChanged(),e.$watch("dataTable.searchValue",function(){r.pageChanged(r.currentPage)}),e.$on(t.EVENT_REFRESH_DATA_TABLE_PREFIX+r.uniqueKey,function(e,t){var n=t&&0<t.page?t.page:r.currentPage;a.markAsLoading(r),a.changePage(r,n)})},e.prototype.markAsLoading=function(e,a){void 0===a&&(a=!0),e.isLoading=a,a?this.usSpinnerService.spin(e.uniqueKey):this.usSpinnerService.stop(e.uniqueKey)},e.prototype.changePage=function(e,a){var r=this,n={};angular.extend(n,e.additionalQueryParameters),this.service.getAll(this.service.getSorting(),this.service.getLimit(),(a-1)*this.service.getLimit(),this.hasSearch(e)?e.searchValue:"",n).then(function(a){e.data=a,e.totalItems=a.recordsTotal})["finally"](function(){r.markAsLoading(e,!1),r.$scope.$emit(t.EVENT_PAGE_CHANGED_DATA_TABLE)})},e.prototype.hasSearch=function(e){return e.isSearchAllowed&&this.hasSearchMinValue(e.searchValue)},e.prototype.hasSearchMinValue=function(e){return!!e&&e.length>2},e.prototype.create=function(){var e=this,a={bindToController:!0,controller:["$scope",function(a){return e.controller(a)}],controllerAs:"dataTable",link:function(a,t){return e.linkFn(a,t)},restrict:"E",scope:{additionalQueryParameters:"=queryParameters",data:"=data",isSearchAllowed:"=search",serviceName:"@service",uniqueKey:"@uniqueKey"},templateUrl:"datatable.directive.html",transclude:!0};return a},e}();angular.module("rocket-grid-datatable").directive("rocketGridDatatable",["$injector","usSpinnerService",function(e,a){return new n(e,a)}])},{"./datatable.helper":2}],2:[function(e,a,t){"use strict";var r="asc",n="desc",i="sortable",s="sortable-"+r,o="sortable-"+n,l=function(){function e(e,a,t){this.sortableColumns=e,this.service=a,this.pageChangeCallback=t}return e.prototype.initSorting=function(){var e=this;0!==this.sortableColumns.length&&this.sortableColumns.each(function(a,t){var n=angular.element(t);n.addClass(i).on("click",function(a){a.preventDefault(),e.updateClasses(angular.element(a.target)),e.pageChangeCallback()}),e.service.getSorting().forEach(function(e){e.column===n.data("sort")&&n.addClass(e.direction===r?s:o)})})},e.prototype.updateClasses=function(e){var a=this,t=e.data("sort");e.parent().find("th").filter(function(a,t){return t!==e.get(0)}).each(function(e,t){a.service.removeSorting(angular.element(t).data("sort")),angular.element(t).removeClass(s),angular.element(t).removeClass(o)}),e.hasClass(s)?(this.service.addSorting(t,n),e.removeClass(s),e.addClass(o)):e.hasClass(o)?(this.service.removeSorting(t),e.removeClass(o)):(this.service.addSorting(t,r),e.addClass(s))},e}();t.DataTableSortingHelper=l},{}],3:[function(){"use strict";angular.module("rocket-grid-datatable",["angularSpinner","bw.paging"])},{}],4:[function(e,a){var a;try{a=angular.module("rocket-grid-datatable")}catch(t){a=angular.module("rocket-grid-datatable",[])}a.run(["$templateCache",function(e){e.put("datatable.directive.html",'<div ng-show="dataTable.isLoading" class="transparent-cover"></div>\n\n<span us-spinner data-spinner-key="{{dataTable.uniqueKey}}"></span>\n\n<div class="grid-datatable grid-datatable__search" data-ng-show="true === dataTable.isSearchAllowed">\n    <label>\n        Search: <input class="grid-datatable__search__box" ng-model="dataTable.searchValue" type="text">\n    </label>\n</div>\n<div class="grid-datatable" ng-transclude></div>\n\n<paging class="pull-right"\n        data-page="dataTable.currentPage"\n        data-paging-action="dataTable.pageChanged(page)"\n        data-page-size="dataTable.itemsPerPage"\n        data-total="dataTable.totalItems"\n        data-adjacent="1"\n        data-show-prev-next="true"\n        data-text-prev="Previous"\n        data-text-next="Next"\n        data-show-boundary-links="false"></paging>\n\n<div class="clearfix"></div>\n\n')}])},{}]},{},[3,2,1,4]);